(()=>{"use strict";var e,t={},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,a),s.exports}a.m=t,a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,r)=>(a.f[r](e,t),t),[])),a.u=e=>e+".background-removal-bundle.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},a.l=(t,r,n,s)=>{if(e[t])e[t].push(r);else{var i,o;if(void 0!==n)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==t){i=c;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",a.nc&&i.setAttribute("nonce",a.nc),i.src=t),e[t]=[r];var l=(r,a)=>{i.onerror=i.onload=null,clearTimeout(p);var n=e[t];if(delete e[t],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach(e=>e(a)),r)return r(a)},p=setTimeout(l.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=l.bind(null,i.onerror),i.onload=l.bind(null,i.onload),o&&document.head.appendChild(i)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{a.b="undefined"!=typeof document&&document.baseURI||self.location.href;var e={792:0};a.f.j=(t,r)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise((r,a)=>n=e[t]=[r,a]);r.push(n[2]=s);var i=a.p+a.u(t),o=new Error;a.l(i,r=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,n[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var n,s,[i,o,d]=r,u=0;if(i.some(t=>0!==e[t])){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);d&&d(a)}for(t&&t(r);u<i.length;u++)s=i[u],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n,s=Object.create,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t)=>function(){return t||(0,e[d(e)[0]])((t={exports:{}}).exports,t),t.exports},p=(e,t,r)=>(r=null!=e?s(u(e)):{},((e,t,r,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of d(t))c.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(a=o(t,r))||a.enumerable});return e})(!t&&e&&e.__esModule?r:i(r,"default",{value:e,enumerable:!0}),e)),h=l({"../../node_modules/.pnpm/iota-array@1.0.0/node_modules/iota-array/iota.js"(e,t){t.exports=function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}}}),f=l({"../../node_modules/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js"(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}}}),m=l({"../../node_modules/.pnpm/ndarray@1.0.19/node_modules/ndarray/ndarray.js"(e,t){var r=h(),a=f(),n="undefined"!=typeof Float64Array;function s(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(s);var a=new Array(r.length);for(e=0;e<a.length;++e)a[e]=r[e][1];return a}function o(e,t){var a=["View",t,"d",e].join("");t<0&&(a="View_Nil"+e);var n="generic"===e;if(-1===t){var s="function "+a+"(a){this.data=a;};var proto="+a+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+a+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+a+"(a){return new "+a+"(a);}";return new Function(s)()}if(0===t)return s="function "+a+"(a,d) {this.data = a;this.offset = d};var proto="+a+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+a+"_copy() {return new "+a+"(this.data,this.offset)};proto.pick=function "+a+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+a+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+a+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+a+"(a,b,c,d){return new "+a+"(a,d)}",new Function("TrivialArray",s)(d[e][0]);s=["'use strict'"];var o=r(t),u=o.map(function(e){return"i"+e}),c="this.offset+"+o.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),l=o.map(function(e){return"b"+e}).join(","),p=o.map(function(e){return"c"+e}).join(",");s.push("function "+a+"(a,"+l+","+p+",d){this.data=a","this.shape=["+l+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+a+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),s.push("Object.defineProperty(proto,'size',{get:function "+a+"_size(){return "+o.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),t<4?(s.push("function "+a+"_order(){"),2===t?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+a+"_set("+u.join(",")+",v){"),n?s.push("return this.data.set("+c+",v)}"):s.push("return this.data["+c+"]=v}"),s.push("proto.get=function "+a+"_get("+u.join(",")+"){"),n?s.push("return this.data.get("+c+")}"):s.push("return this.data["+c+"]}"),s.push("proto.index=function "+a+"_index(",u.join(),"){return "+c+"}"),s.push("proto.hi=function "+a+"_hi("+u.join(",")+"){return new "+a+"(this.data,"+o.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+o.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var h=o.map(function(e){return"a"+e+"=this.shape["+e+"]"}),f=o.map(function(e){return"c"+e+"=this.stride["+e+"]"});s.push("proto.lo=function "+a+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+f.join(","));for(var m=0;m<t;++m)s.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");for(s.push("return new "+a+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"c"+e}).join(",")+",b)}"),s.push("proto.step=function "+a+"_step("+u.join(",")+"){var "+o.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+o.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),m=0;m<t;++m)s.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");s.push("return new "+a+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"b"+e}).join(",")+",c)}");var y=new Array(t),v=new Array(t);for(m=0;m<t;++m)y[m]="a[i"+m+"]",v[m]="b[i"+m+"]";for(s.push("proto.transpose=function "+a+"_transpose("+u+"){"+u.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+a+"(this.data,"+y.join(",")+","+v.join(",")+",this.offset)}"),s.push("proto.pick=function "+a+"_pick("+u+"){var a=[],b=[],c=this.offset"),m=0;m<t;++m)s.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+a+"(data,shape,stride,offset){return new "+a+"(data,"+o.map(function(e){return"shape["+e+"]"}).join(",")+","+o.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",s.join("\n"))(d[e],i)}var d={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};t.exports=function(e,t,r,s){if(void 0===e)return(0,d.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var i=t.length;if(void 0===r){r=new Array(i);for(var u=i-1,c=1;u>=0;--u)r[u]=c,c*=t[u]}if(void 0===s)for(s=0,u=0;u<i;++u)r[u]<0&&(s-=(t[u]-1)*r[u]);for(var l=function(e){if(a(e))return"buffer";if(n)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),p=d[l];p.length<=i+1;)p.push(o(l,p.length-1));return(0,p[i+1])(e,t,r,s)}}}),y="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g,v="object"==typeof self&&self&&self.Object===Object&&self,g=y||v||Function("return this")(),_=g.Symbol,b=Object.prototype,w=b.hasOwnProperty,k=b.toString,x=_?_.toStringTag:void 0,j=Object.prototype.toString,O=_?_.toStringTag:void 0,T=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":O&&O in Object(e)?function(e){var t=w.call(e,x),r=e[x];try{e[x]=void 0;var a=!0}catch(e){}var n=k.call(e);return a&&(t?e[x]=r:delete e[x]),n}(e):function(e){return j.call(e)}(e)},Z=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},A=g["__core-js_shared__"],C=(n=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",S=Function.prototype.toString,E=/^\[object .+?Constructor\]$/,N=Function.prototype,P=Object.prototype,I=N.toString,R=P.hasOwnProperty,$=RegExp("^"+I.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=function(e){return!(!Z(e)||(t=e,C&&C in t))&&(function(e){if(!Z(e))return!1;var t=T(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)?$:E).test(function(e){if(null!=e){try{return S.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t},F=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return M(r)?r:void 0},z=F(Object,"create"),L=Object.prototype.hasOwnProperty,U=Object.prototype.hasOwnProperty;function D(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}D.prototype.clear=function(){this.__data__=z?z(null):{},this.size=0},D.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},D.prototype.get=function(e){var t=this.__data__;if(z){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return L.call(t,e)?t[e]:void 0},D.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:U.call(t,e)},D.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=z&&void 0===t?"__lodash_hash_undefined__":t,this};var B=D,V=function(e,t){return e===t||e!=e&&t!=t},K=function(e,t){for(var r=e.length;r--;)if(V(e[r][0],t))return r;return-1},W=Array.prototype.splice;function q(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}q.prototype.clear=function(){this.__data__=[],this.size=0},q.prototype.delete=function(e){var t=this.__data__,r=K(t,e);return!(r<0||(r==t.length-1?t.pop():W.call(t,r,1),--this.size,0))},q.prototype.get=function(e){var t=this.__data__,r=K(t,e);return r<0?void 0:t[r][1]},q.prototype.has=function(e){return K(this.__data__,e)>-1},q.prototype.set=function(e,t){var r=this.__data__,a=K(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this};var G=q,J=F(g,"Map"),Y=function(e,t){var r,a,n=e.__data__;return("string"==(a=typeof(r=t))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map};function H(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}H.prototype.clear=function(){this.size=0,this.__data__={hash:new B,map:new(J||G),string:new B}},H.prototype.delete=function(e){var t=Y(this,e).delete(e);return this.size-=t?1:0,t},H.prototype.get=function(e){return Y(this,e).get(e)},H.prototype.has=function(e){return Y(this,e).has(e)},H.prototype.set=function(e,t){var r=Y(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this};var X=H;function Q(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var a=arguments,n=t?t.apply(this,a):a[0],s=r.cache;if(s.has(n))return s.get(n);var i=e.apply(this,a);return r.cache=s.set(n,i)||s,i};return r.cache=new(Q.Cache||X),r}Q.Cache=X;var ee=Q,te=p(m()),re=class e{constructor(e,t){this.type="application/octet-stream",this.params={},this.type=e,this.params=t}toString(){const e=[];for(const t in this.params){const r=this.params[t];e.push(`${t}=${r}`)}return[this.type,...e].join(";")}static create(t,r){return new e(t,r)}isIdentical(e){return this.type===e.type&&this.params===e.params}isEqual(e){return this.type===e.type}static fromString(t){const[r,...a]=t.split(";"),n={};for(const e of a){const[t,r]=e.split("=");n[t.trim()]=r.trim()}return new e(r,n)}},ae=p(m());function ne(e,t,r,a=!1){const[n,s,i]=e.shape;let o=s/t,d=n/r;a&&(o=d=Math.max(o,d)>1?Math.max(o,d):Math.min(o,d));const u=(0,te.default)(function(e){if("undefined"!=typeof Uint8Array)return new Uint8Array(e);if("undefined"!=typeof Uint8ClampedArray)return new Uint8ClampedArray(e);if("undefined"!=typeof Uint16Array)return new Uint16Array(e);if("undefined"!=typeof Uint32Array)return new Uint32Array(e);if("undefined"!=typeof Float32Array)return new Float32Array(e);if("undefined"!=typeof Float64Array)return new Float64Array(e);throw new Error("TypedArray not supported")}(i*t*r),[r,t,i]);for(let a=0;a<r;a++)for(let r=0;r<t;r++){const t=r*o,c=a*d,l=Math.max(Math.floor(t),0),p=Math.min(Math.ceil(t),s-1),h=Math.max(Math.floor(c),0),f=Math.min(Math.ceil(c),n-1),m=t-l,y=c-h;for(let t=0;t<i;t++){const n=(1-m)*(1-y)*e.get(h,l,t)+m*(1-y)*e.get(h,p,t)+(1-m)*y*e.get(f,l,t)+m*y*e.get(f,p,t);u.set(a,r,t,n)}}return u}async function se(e,t){if("string"==typeof e&&(r=e,a=t.publicPath,e=function(e){return new RegExp("^(?:[a-z+]+:)?//","i").test(e)}(r)?r:new URL(r,a).href,e=new URL(e)),e instanceof URL){const t=await fetch(e,{});e=await t.blob()}var r,a;return(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e=new Blob([e])),e instanceof Blob&&(e=await async function(e){const t=re.fromString(e.type);switch(t.type){case"image/x-alpha8":{const r=parseInt(t.params.width),a=parseInt(t.params.height);return(0,ae.default)(new Uint8Array(await e.arrayBuffer()),[a,r,1])}case"image/x-rgba8":{const r=parseInt(t.params.width),a=parseInt(t.params.height);return(0,ae.default)(new Uint8Array(await e.arrayBuffer()),[a,r,4])}case"application/octet-stream":case"image/png":case"image/jpeg":case"image/jpg":case"image/webp":{const t=((n=(a=ie((r=await createImageBitmap(e)).width,r.height)).getContext("2d")).drawImage(r,0,0),n.getImageData(0,0,a.width,a.height));return(0,ae.default)(new Uint8Array(t.data),[t.height,t.width,4])}default:throw new Error(`Invalid format: ${t.type} with params: ${t.params}`)}var r,a,n}(e)),e}function ie(e,t){let r;if(r="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(e,t):document.createElement("canvas"),!r)throw new Error("Canvas nor OffscreenCanvas are available in the current context.");return r}var oe=p(m()),de=async()=>void 0!==navigator.gpu&&null!==await navigator.gpu.requestAdapter();async function ue(e,t){return URL.createObjectURL(await ce(e,t))}async function ce(e,t){const r=new URL("resources.json",t.publicPath),a=await fetch(r);if(!a.ok)throw new Error("Resource metadata not found. Ensure that the config.publicPath is configured correctly.");const n=(await a.json())[e];if(!n)throw new Error(`Resource ${e} not found. Ensure that the config.publicPath is configured correctly.`);const s=n.chunks;let i=0;const o=s.map(async r=>{const a=r.offsets[1]-r.offsets[0],s=t.publicPath?new URL(r.name,t.publicPath).toString():r.name,o=await fetch(s,t.fetchArgs),d=await o.blob();if(a!==d.size)throw new Error(`Failed to fetch ${e} with size ${a} but got ${d.size}`);return t.progress&&(i+=a,t.progress(`fetch:${e}`,i,n.size)),d}),d=await Promise.all(o),u=new Blob(d,{type:n.mime});if(u.size!==n.size)throw new Error(`Failed to fetch ${e} with size ${n.size} but got ${u.size}`);return u}var le,pe,he,fe=null,me=async e=>null!==fe?fe:fe=e?(await a.e(273).then(a.bind(a,273))).default:(await a.e(189).then(a.bind(a,189))).default;(pe=le||(le={})).assertEqual=e=>e,pe.assertIs=function(e){},pe.assertNever=function(e){throw new Error},pe.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},pe.getValidEnumValues=e=>{const t=pe.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(const a of t)r[a]=e[a];return pe.objectValues(r)},pe.objectValues=e=>pe.objectKeys(e).map(function(t){return e[t]}),pe.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},pe.find=(e,t)=>{for(const r of e)if(t(r))return r},pe.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,pe.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},pe.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(he||(he={})).mergeShapes=(e,t)=>({...e,...t});var ye=le.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ve=e=>{switch(typeof e){case"undefined":return ye.undefined;case"string":return ye.string;case"number":return isNaN(e)?ye.nan:ye.number;case"boolean":return ye.boolean;case"function":return ye.function;case"bigint":return ye.bigint;case"symbol":return ye.symbol;case"object":return Array.isArray(e)?ye.array:null===e?ye.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?ye.promise:"undefined"!=typeof Map&&e instanceof Map?ye.map:"undefined"!=typeof Set&&e instanceof Set?ye.set:"undefined"!=typeof Date&&e instanceof Date?ye.date:ye.object;default:return ye.unknown}},ge=le.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_e=class e extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},a=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(a);else if("invalid_return_type"===n.code)a(n.returnTypeError);else if("invalid_arguments"===n.code)a(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,a=0;for(;a<n.path.length;){const r=n.path[a];a===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(this),r}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,le.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};_e.create=e=>new _e(e);var be=(e,t)=>{let r;switch(e.code){case ge.invalid_type:r=e.received===ye.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ge.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,le.jsonStringifyReplacer)}`;break;case ge.unrecognized_keys:r=`Unrecognized key(s) in object: ${le.joinValues(e.keys,", ")}`;break;case ge.invalid_union:r="Invalid input";break;case ge.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${le.joinValues(e.options)}`;break;case ge.invalid_enum_value:r=`Invalid enum value. Expected ${le.joinValues(e.options)}, received '${e.received}'`;break;case ge.invalid_arguments:r="Invalid function arguments";break;case ge.invalid_return_type:r="Invalid function return type";break;case ge.invalid_date:r="Invalid date";break;case ge.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:le.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ge.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ge.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ge.custom:r="Invalid input";break;case ge.invalid_intersection_types:r="Intersection results could not be merged";break;case ge.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ge.not_finite:r="Number must be finite";break;default:r=t.defaultError,le.assertNever(e)}return{message:r}},we=be;function ke(){return we}var xe=e=>{const{data:t,path:r,errorMaps:a,issueData:n}=e,s=[...r,...n.path||[]],i={...n,path:s};if(void 0!==n.message)return{...n,path:s,message:n.message};let o="";const d=a.filter(e=>!!e).slice().reverse();for(const e of d)o=e(i,{data:t,defaultError:o}).message;return{...n,path:s,message:o}};function je(e,t){const r=ke(),a=xe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===be?void 0:be].filter(e=>!!e)});e.common.issues.push(a)}var Oe,Te,Ze,Ae,Ce=class e{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const a of t){if("aborted"===a.status)return Se;"dirty"===a.status&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(t,r){const a=[];for(const e of r){const t=await e.key,r=await e.value;a.push({key:t,value:r})}return e.mergeObjectSync(t,a)}static mergeObjectSync(e,t){const r={};for(const a of t){const{key:t,value:n}=a;if("aborted"===t.status)return Se;if("aborted"===n.status)return Se;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"===t.value||void 0===n.value&&!a.alwaysSet||(r[t.value]=n.value)}return{status:e.value,value:r}}},Se=Object.freeze({status:"aborted"}),Ee=e=>({status:"dirty",value:e}),Ne=e=>({status:"valid",value:e}),Pe=e=>"aborted"===e.status,Ie=e=>"dirty"===e.status,Re=e=>"valid"===e.status,$e=e=>"undefined"!=typeof Promise&&e instanceof Promise;function Me(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)}function Fe(e,t,r,a,n){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?n.call(e,r):n?n.value=r:t.set(e,r),r}(Te=Oe||(Oe={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},Te.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;var ze=class{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Le=(e,t)=>{if(Re(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new _e(e.common.issues);return this._error=t,this._error}}};function Ue(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:a,description:n}=e;if(t&&(r||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{var s,i;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:n.defaultError}:void 0===n.data?{message:null!==(s=null!=o?o:a)&&void 0!==s?s:n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:null!==(i=null!=o?o:r)&&void 0!==i?i:n.defaultError}},description:n}}var De,Be=class{get description(){return this._def.description}_getType(e){return ve(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ve(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ce,ctx:{common:e.parent.common,data:e.data,parsedType:ve(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if($e(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const a={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)},n=this._parseSync({data:e,path:a.path,parent:a});return Le(a,n)}"~validate"(e){var t,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:a});return Re(t)?{value:t.value}:{issues:a.common.issues}}catch(e){(null===(r=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(e=>Re(e)?{value:e.value}:{issues:a.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)},a=this._parse({data:e,path:r.path,parent:r}),n=await($e(a)?a:Promise.resolve(a));return Le(r,n)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,a)=>{const n=e(t),s=()=>a.addIssue({code:ge.custom,...r(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(s(),!1)):!!n||(s(),!1)})}refinement(e,t){return this._refinement((r,a)=>!!e(r)||(a.addIssue("function"==typeof t?t(r,a):t),!1))}_refinement(e){return new Vt({schema:this,typeName:rr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Kt.create(this,this._def)}nullable(){return Wt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ot.create(this)}promise(){return Bt.create(this,this._def)}or(e){return At.create([this,e],this._def)}and(e){return Nt.create(this,e,this._def)}transform(e){return new Vt({...Ue(this._def),schema:this,typeName:rr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new qt({...Ue(this._def),innerType:this,defaultValue:t,typeName:rr.ZodDefault})}brand(){return new Ht({typeName:rr.ZodBranded,type:this,...Ue(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Gt({...Ue(this._def),innerType:this,catchValue:t,typeName:rr.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Xt.create(this,e)}readonly(){return Qt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Ve=/^c[^\s-]{8,}$/i,Ke=/^[0-9a-z]+$/,We=/^[0-9A-HJKMNP-TV-Z]{26}$/i,qe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ge=/^[a-z0-9_-]{21}$/i,Je=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ye=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,He=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Xe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Qe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,et=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,tt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,at=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",st=new RegExp(`^${nt}$`);function it(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function ot(e){return new RegExp(`^${it(e)}$`)}function dt(e){let t=`${nt}T${it(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function ut(e,t){return!("v4"!==t&&t||!Xe.test(e))||!("v6"!==t&&t||!et.test(e))}function ct(e,t){if(!Je.test(e))return!1;try{const[r]=e.split("."),a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(a));return!("object"!=typeof n||null===n||!n.typ||!n.alg||t&&n.alg!==t)}catch(e){return!1}}function lt(e,t){return!("v4"!==t&&t||!Qe.test(e))||!("v6"!==t&&t||!tt.test(e))}var pt=class e extends Be{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ye.string){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.string,received:t.parsedType}),Se}const t=new Ce;let r;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),je(r,{code:ge.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),je(r,{code:ge.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const n=e.data.length>a.value,s=e.data.length<a.value;(n||s)&&(r=this._getOrReturnCtx(e,r),n?je(r,{code:ge.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&je(r,{code:ge.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)He.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"email",code:ge.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)De||(De=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),De.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"emoji",code:ge.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)qe.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"uuid",code:ge.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)Ge.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"nanoid",code:ge.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)Ve.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"cuid",code:ge.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)Ke.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"cuid2",code:ge.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)We.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"ulid",code:ge.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(n){r=this._getOrReturnCtx(e,r),je(r,{validation:"url",code:ge.invalid_string,message:a.message}),t.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"regex",code:ge.invalid_string,message:a.message}),t.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),je(r,{code:ge.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),je(r,{code:ge.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),je(r,{code:ge.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty()):"datetime"===a.kind?dt(a).test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{code:ge.invalid_string,validation:"datetime",message:a.message}),t.dirty()):"date"===a.kind?st.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{code:ge.invalid_string,validation:"date",message:a.message}),t.dirty()):"time"===a.kind?ot(a).test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{code:ge.invalid_string,validation:"time",message:a.message}),t.dirty()):"duration"===a.kind?Ye.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"duration",code:ge.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?ut(e.data,a.version)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"ip",code:ge.invalid_string,message:a.message}),t.dirty()):"jwt"===a.kind?ct(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"jwt",code:ge.invalid_string,message:a.message}),t.dirty()):"cidr"===a.kind?lt(e.data,a.version)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"cidr",code:ge.invalid_string,message:a.message}),t.dirty()):"base64"===a.kind?rt.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"base64",code:ge.invalid_string,message:a.message}),t.dirty()):"base64url"===a.kind?at.test(e.data)||(r=this._getOrReturnCtx(e,r),je(r,{validation:"base64url",code:ge.invalid_string,message:a.message}),t.dirty()):le.assertNever(a);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:ge.invalid_string,...Oe.errToObj(r)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(e){return this._addCheck({kind:"email",...Oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Oe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Oe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Oe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Oe.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null==e?void 0:e.local)&&void 0!==r&&r,...Oe.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...Oe.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Oe.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Oe.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Oe.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Oe.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Oe.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Oe.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Oe.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Oe.errToObj(t)})}nonempty(e){return this.min(1,Oe.errToObj(e))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function ht(e,t){const r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=r>a?r:a;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}pt.create=e=>{var t;return new pt({checks:[],typeName:rr.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ue(e)})};var ft=class e extends Be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ye.number){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.number,received:t.parsedType}),Se}let t;const r=new Ce;for(const a of this._def.checks)"int"===a.kind?le.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),je(t,{code:ge.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),je(t,{code:ge.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),je(t,{code:ge.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==ht(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),je(t,{code:ge.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),je(t,{code:ge.not_finite,message:a.message}),r.dirty()):le.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Oe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Oe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Oe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Oe.toString(t))}setLimit(t,r,a,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:Oe.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(e){return this._addCheck({kind:"int",message:Oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Oe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Oe.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&le.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}};ft.create=e=>new ft({checks:[],typeName:rr.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Ue(e)});var mt=class e extends Be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==ye.bigint)return this._getInvalidInput(e);let t;const r=new Ce;for(const a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),je(t,{code:ge.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),je(t,{code:ge.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),je(t,{code:ge.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):le.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.bigint,received:t.parsedType}),Se}gte(e,t){return this.setLimit("min",e,!0,Oe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Oe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Oe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Oe.toString(t))}setLimit(t,r,a,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:Oe.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};mt.create=e=>{var t;return new mt({checks:[],typeName:rr.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Ue(e)})};var yt=class extends Be{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==ye.boolean){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.boolean,received:t.parsedType}),Se}return Ne(e.data)}};yt.create=e=>new yt({typeName:rr.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Ue(e)});var vt=class e extends Be{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ye.date){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.date,received:t.parsedType}),Se}if(isNaN(e.data.getTime()))return je(this._getOrReturnCtx(e),{code:ge.invalid_date}),Se;const t=new Ce;let r;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),je(r,{code:ge.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),je(r,{code:ge.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):le.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Oe.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Oe.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};vt.create=e=>new vt({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:rr.ZodDate,...Ue(e)});var gt=class extends Be{_parse(e){if(this._getType(e)!==ye.symbol){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.symbol,received:t.parsedType}),Se}return Ne(e.data)}};gt.create=e=>new gt({typeName:rr.ZodSymbol,...Ue(e)});var _t=class extends Be{_parse(e){if(this._getType(e)!==ye.undefined){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.undefined,received:t.parsedType}),Se}return Ne(e.data)}};_t.create=e=>new _t({typeName:rr.ZodUndefined,...Ue(e)});var bt=class extends Be{_parse(e){if(this._getType(e)!==ye.null){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.null,received:t.parsedType}),Se}return Ne(e.data)}};bt.create=e=>new bt({typeName:rr.ZodNull,...Ue(e)});var wt=class extends Be{constructor(){super(...arguments),this._any=!0}_parse(e){return Ne(e.data)}};wt.create=e=>new wt({typeName:rr.ZodAny,...Ue(e)});var kt=class extends Be{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ne(e.data)}};kt.create=e=>new kt({typeName:rr.ZodUnknown,...Ue(e)});var xt=class extends Be{_parse(e){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.never,received:t.parsedType}),Se}};xt.create=e=>new xt({typeName:rr.ZodNever,...Ue(e)});var jt=class extends Be{_parse(e){if(this._getType(e)!==ye.undefined){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.void,received:t.parsedType}),Se}return Ne(e.data)}};jt.create=e=>new jt({typeName:rr.ZodVoid,...Ue(e)});var Ot=class e extends Be{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==ye.array)return je(t,{code:ge.invalid_type,expected:ye.array,received:t.parsedType}),Se;if(null!==a.exactLength){const e=t.data.length>a.exactLength.value,n=t.data.length<a.exactLength.value;(e||n)&&(je(t,{code:e?ge.too_big:ge.too_small,minimum:n?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(je(t,{code:ge.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(je(t,{code:ge.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>a.type._parseAsync(new ze(t,e,t.path,r)))).then(e=>Ce.mergeArray(r,e));const n=[...t.data].map((e,r)=>a.type._parseSync(new ze(t,e,t.path,r)));return Ce.mergeArray(r,n)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:Oe.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:Oe.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:Oe.toString(r)}})}nonempty(e){return this.min(1,e)}};function Tt(e){if(e instanceof Zt){const t={};for(const r in e.shape){const a=e.shape[r];t[r]=Kt.create(Tt(a))}return new Zt({...e._def,shape:()=>t})}return e instanceof Ot?new Ot({...e._def,type:Tt(e.element)}):e instanceof Kt?Kt.create(Tt(e.unwrap())):e instanceof Wt?Wt.create(Tt(e.unwrap())):e instanceof Pt?Pt.create(e.items.map(e=>Tt(e))):e}Ot.create=(e,t)=>new Ot({type:e,minLength:null,maxLength:null,exactLength:null,typeName:rr.ZodArray,...Ue(t)});var Zt=class e extends Be{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=le.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ye.object){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.object,received:t.parsedType}),Se}const{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:n}=this._getCached(),s=[];if(!(this._def.catchall instanceof xt&&"strip"===this._def.unknownKeys))for(const e in r.data)n.includes(e)||s.push(e);const i=[];for(const e of n){const t=a[e],n=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new ze(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof xt){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(je(r,{code:ge.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const a=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new ze(r,a,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of i){const r=await t.key,a=await t.value;e.push({key:r,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>Ce.mergeObjectSync(t,e)):Ce.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(t){return Oe.errToObj,new e({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,r)=>{var a,n,s,i;const o=null!==(s=null===(n=(a=this._def).errorMap)||void 0===n?void 0:n.call(a,e,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===e.code?{message:null!==(i=Oe.errToObj(t).message)&&void 0!==i?i:o}:{message:o}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:rr.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(t){return new e({...this._def,catchall:t})}pick(t){const r={};return le.objectKeys(t).forEach(e=>{t[e]&&this.shape[e]&&(r[e]=this.shape[e])}),new e({...this._def,shape:()=>r})}omit(t){const r={};return le.objectKeys(this.shape).forEach(e=>{t[e]||(r[e]=this.shape[e])}),new e({...this._def,shape:()=>r})}deepPartial(){return Tt(this)}partial(t){const r={};return le.objectKeys(this.shape).forEach(e=>{const a=this.shape[e];t&&!t[e]?r[e]=a:r[e]=a.optional()}),new e({...this._def,shape:()=>r})}required(t){const r={};return le.objectKeys(this.shape).forEach(e=>{if(t&&!t[e])r[e]=this.shape[e];else{let t=this.shape[e];for(;t instanceof Kt;)t=t._def.innerType;r[e]=t}}),new e({...this._def,shape:()=>r})}keyof(){return Lt(le.objectKeys(this.shape))}};Zt.create=(e,t)=>new Zt({shape:()=>e,unknownKeys:"strip",catchall:xt.create(),typeName:rr.ZodObject,...Ue(t)}),Zt.strictCreate=(e,t)=>new Zt({shape:()=>e,unknownKeys:"strict",catchall:xt.create(),typeName:rr.ZodObject,...Ue(t)}),Zt.lazycreate=(e,t)=>new Zt({shape:e,unknownKeys:"strip",catchall:xt.create(),typeName:rr.ZodObject,...Ue(t)});var At=class extends Be{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map(e=>new _e(e.ctx.common.issues));return je(t,{code:ge.invalid_union,unionErrors:r}),Se});{let e;const a=[];for(const n of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const n=a.map(e=>new _e(e));return je(t,{code:ge.invalid_union,unionErrors:n}),Se}}get options(){return this._def.options}};At.create=(e,t)=>new At({options:e,typeName:rr.ZodUnion,...Ue(t)});var Ct=e=>e instanceof Ft?Ct(e.schema):e instanceof Vt?Ct(e.innerType()):e instanceof zt?[e.value]:e instanceof Ut?e.options:e instanceof Dt?le.objectValues(e.enum):e instanceof qt?Ct(e._def.innerType):e instanceof _t?[void 0]:e instanceof bt?[null]:e instanceof Kt?[void 0,...Ct(e.unwrap())]:e instanceof Wt?[null,...Ct(e.unwrap())]:e instanceof Ht||e instanceof Qt?Ct(e.unwrap()):e instanceof Gt?Ct(e._def.innerType):[],St=class e extends Be{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ye.object)return je(t,{code:ge.invalid_type,expected:ye.object,received:t.parsedType}),Se;const r=this.discriminator,a=t.data[r],n=this.optionsMap.get(a);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(je(t,{code:ge.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,a){const n=new Map;for(const e of r){const r=Ct(e.shape[t]);if(!r.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of r){if(n.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);n.set(a,e)}}return new e({typeName:rr.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:n,...Ue(a)})}};function Et(e,t){const r=ve(e),a=ve(t);if(e===t)return{valid:!0,data:e};if(r===ye.object&&a===ye.object){const r=le.objectKeys(t),a=le.objectKeys(e).filter(e=>-1!==r.indexOf(e)),n={...e,...t};for(const r of a){const a=Et(e[r],t[r]);if(!a.valid)return{valid:!1};n[r]=a.data}return{valid:!0,data:n}}if(r===ye.array&&a===ye.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let a=0;a<e.length;a++){const n=Et(e[a],t[a]);if(!n.valid)return{valid:!1};r.push(n.data)}return{valid:!0,data:r}}return r===ye.date&&a===ye.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}var Nt=class extends Be{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if(Pe(e)||Pe(a))return Se;const n=Et(e.value,a.value);return n.valid?((Ie(e)||Ie(a))&&t.dirty(),{status:t.value,value:n.data}):(je(r,{code:ge.invalid_intersection_types}),Se)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};Nt.create=(e,t,r)=>new Nt({left:e,right:t,typeName:rr.ZodIntersection,...Ue(r)});var Pt=class e extends Be{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.array)return je(r,{code:ge.invalid_type,expected:ye.array,received:r.parsedType}),Se;if(r.data.length<this._def.items.length)return je(r,{code:ge.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&r.data.length>this._def.items.length&&(je(r,{code:ge.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...r.data].map((e,t)=>{const a=this._def.items[t]||this._def.rest;return a?a._parse(new ze(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(a).then(e=>Ce.mergeArray(t,e)):Ce.mergeArray(t,a)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Pt.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Pt({items:e,typeName:rr.ZodTuple,rest:null,...Ue(t)})};var It=class e extends Be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.object)return je(r,{code:ge.invalid_type,expected:ye.object,received:r.parsedType}),Se;const a=[],n=this._def.keyType,s=this._def.valueType;for(const e in r.data)a.push({key:n._parse(new ze(r,e,r.path,e)),value:s._parse(new ze(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?Ce.mergeObjectAsync(t,a):Ce.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(t,r,a){return new e(r instanceof Be?{keyType:t,valueType:r,typeName:rr.ZodRecord,...Ue(a)}:{keyType:pt.create(),valueType:t,typeName:rr.ZodRecord,...Ue(r)})}},Rt=class extends Be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.map)return je(r,{code:ge.invalid_type,expected:ye.map,received:r.parsedType}),Se;const a=this._def.keyType,n=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:a._parse(new ze(r,e,r.path,[s,"key"])),value:n._parse(new ze(r,t,r.path,[s,"value"]))}));if(r.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const r of s){const a=await r.key,n=await r.value;if("aborted"===a.status||"aborted"===n.status)return Se;"dirty"!==a.status&&"dirty"!==n.status||t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}})}{const e=new Map;for(const r of s){const a=r.key,n=r.value;if("aborted"===a.status||"aborted"===n.status)return Se;"dirty"!==a.status&&"dirty"!==n.status||t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}}}};Rt.create=(e,t,r)=>new Rt({valueType:t,keyType:e,typeName:rr.ZodMap,...Ue(r)});var $t=class e extends Be{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.set)return je(r,{code:ge.invalid_type,expected:ye.set,received:r.parsedType}),Se;const a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(je(r,{code:ge.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(je(r,{code:ge.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const n=this._def.valueType;function s(e){const r=new Set;for(const a of e){if("aborted"===a.status)return Se;"dirty"===a.status&&t.dirty(),r.add(a.value)}return{status:t.value,value:r}}const i=[...r.data.values()].map((e,t)=>n._parse(new ze(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(t,r){return new e({...this._def,minSize:{value:t,message:Oe.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:Oe.toString(r)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};$t.create=(e,t)=>new $t({valueType:e,minSize:null,maxSize:null,typeName:rr.ZodSet,...Ue(t)});var Mt=class e extends Be{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ye.function)return je(t,{code:ge.invalid_type,expected:ye.function,received:t.parsedType}),Se;function r(e,r){return xe({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ke(),be].filter(e=>!!e),issueData:{code:ge.invalid_arguments,argumentsError:r}})}function a(e,r){return xe({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ke(),be].filter(e=>!!e),issueData:{code:ge.invalid_return_type,returnTypeError:r}})}const n={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof Bt){const e=this;return Ne(async function(...t){const i=new _e([]),o=await e._def.args.parseAsync(t,n).catch(e=>{throw i.addIssue(r(t,e)),i}),d=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(d,n).catch(e=>{throw i.addIssue(a(d,e)),i})})}{const e=this;return Ne(function(...t){const i=e._def.args.safeParse(t,n);if(!i.success)throw new _e([r(t,i.error)]);const o=Reflect.apply(s,this,i.data),d=e._def.returns.safeParse(o,n);if(!d.success)throw new _e([a(o,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:Pt.create(t).rest(kt.create())})}returns(t){return new e({...this._def,returns:t})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(t,r,a){return new e({args:t||Pt.create([]).rest(kt.create()),returns:r||kt.create(),typeName:rr.ZodFunction,...Ue(a)})}},Ft=class extends Be{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Ft.create=(e,t)=>new Ft({getter:e,typeName:rr.ZodLazy,...Ue(t)});var zt=class extends Be{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return je(t,{received:t.data,code:ge.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:e.data}}get value(){return this._def.value}};function Lt(e,t){return new Ut({values:e,typeName:rr.ZodEnum,...Ue(t)})}zt.create=(e,t)=>new zt({value:e,typeName:rr.ZodLiteral,...Ue(t)});var Ut=class e extends Be{constructor(){super(...arguments),Ze.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return je(t,{expected:le.joinValues(r),received:t.parsedType,code:ge.invalid_type}),Se}if(Me(this,Ze,"f")||Fe(this,Ze,new Set(this._def.values),"f"),!Me(this,Ze,"f").has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return je(t,{received:t.data,code:ge.invalid_enum_value,options:r}),Se}return Ne(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(e=>!t.includes(e)),{...this._def,...r})}};Ze=new WeakMap,Ut.create=Lt;var Dt=class extends Be{constructor(){super(...arguments),Ae.set(this,void 0)}_parse(e){const t=le.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ye.string&&r.parsedType!==ye.number){const e=le.objectValues(t);return je(r,{expected:le.joinValues(e),received:r.parsedType,code:ge.invalid_type}),Se}if(Me(this,Ae,"f")||Fe(this,Ae,new Set(le.getValidEnumValues(this._def.values)),"f"),!Me(this,Ae,"f").has(e.data)){const e=le.objectValues(t);return je(r,{received:r.data,code:ge.invalid_enum_value,options:e}),Se}return Ne(e.data)}get enum(){return this._def.values}};Ae=new WeakMap,Dt.create=(e,t)=>new Dt({values:e,typeName:rr.ZodNativeEnum,...Ue(t)});var Bt=class extends Be{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ye.promise&&!1===t.common.async)return je(t,{code:ge.invalid_type,expected:ye.promise,received:t.parsedType}),Se;const r=t.parsedType===ye.promise?t.data:Promise.resolve(t.data);return Ne(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}};Bt.create=(e,t)=>new Bt({type:e,typeName:rr.ZodPromise,...Ue(t)});var Vt=class extends Be{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,n={addIssue:e=>{je(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===a.type){const e=a.transform(r.data,n);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return Se;const a=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===a.status?Se:"dirty"===a.status||"dirty"===t.value?Ee(a.value):a});{if("aborted"===t.value)return Se;const a=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===a.status?Se:"dirty"===a.status||"dirty"===t.value?Ee(a.value):a}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?Se:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?Se:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===a.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Re(e))return e;const s=a.transform(e.value,n);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>Re(e)?Promise.resolve(a.transform(e.value,n)).then(e=>({status:t.value,value:e})):e)}le.assertNever(a)}};Vt.create=(e,t,r)=>new Vt({schema:e,typeName:rr.ZodEffects,effect:t,...Ue(r)}),Vt.createWithPreprocess=(e,t,r)=>new Vt({schema:t,effect:{type:"preprocess",transform:e},typeName:rr.ZodEffects,...Ue(r)});var Kt=class extends Be{_parse(e){return this._getType(e)===ye.undefined?Ne(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Kt.create=(e,t)=>new Kt({innerType:e,typeName:rr.ZodOptional,...Ue(t)});var Wt=class extends Be{_parse(e){return this._getType(e)===ye.null?Ne(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Wt.create=(e,t)=>new Wt({innerType:e,typeName:rr.ZodNullable,...Ue(t)});var qt=class extends Be{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===ye.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};qt.create=(e,t)=>new qt({innerType:e,typeName:rr.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Ue(t)});var Gt=class extends Be{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return $e(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new _e(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new _e(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};Gt.create=(e,t)=>new Gt({innerType:e,typeName:rr.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Ue(t)});var Jt=class extends Be{_parse(e){if(this._getType(e)!==ye.nan){const t=this._getOrReturnCtx(e);return je(t,{code:ge.invalid_type,expected:ye.nan,received:t.parsedType}),Se}return{status:"valid",value:e.data}}};Jt.create=e=>new Jt({typeName:rr.ZodNaN,...Ue(e)});var Yt=Symbol("zod_brand"),Ht=class extends Be{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},Xt=class e extends Be{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?Se:"dirty"===e.status?(t.dirty(),Ee(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?Se:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(t,r){return new e({in:t,out:r,typeName:rr.ZodPipeline})}},Qt=class extends Be{_parse(e){const t=this._def.innerType._parse(e),r=e=>(Re(e)&&(e.value=Object.freeze(e.value)),e);return $e(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}};function er(e,t){const r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function tr(e,t={},r){return e?wt.create().superRefine((a,n)=>{var s,i;const o=e(a);if(o instanceof Promise)return o.then(e=>{var s,i;if(!e){const e=er(t,a),o=null===(i=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===i||i;n.addIssue({code:"custom",...e,fatal:o})}});if(!o){const e=er(t,a),o=null===(i=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===i||i;n.addIssue({code:"custom",...e,fatal:o})}}):wt.create()}Qt.create=(e,t)=>new Qt({innerType:e,typeName:rr.ZodReadonly,...Ue(t)});var rr,ar,nr={object:Zt.lazycreate};(ar=rr||(rr={})).ZodString="ZodString",ar.ZodNumber="ZodNumber",ar.ZodNaN="ZodNaN",ar.ZodBigInt="ZodBigInt",ar.ZodBoolean="ZodBoolean",ar.ZodDate="ZodDate",ar.ZodSymbol="ZodSymbol",ar.ZodUndefined="ZodUndefined",ar.ZodNull="ZodNull",ar.ZodAny="ZodAny",ar.ZodUnknown="ZodUnknown",ar.ZodNever="ZodNever",ar.ZodVoid="ZodVoid",ar.ZodArray="ZodArray",ar.ZodObject="ZodObject",ar.ZodUnion="ZodUnion",ar.ZodDiscriminatedUnion="ZodDiscriminatedUnion",ar.ZodIntersection="ZodIntersection",ar.ZodTuple="ZodTuple",ar.ZodRecord="ZodRecord",ar.ZodMap="ZodMap",ar.ZodSet="ZodSet",ar.ZodFunction="ZodFunction",ar.ZodLazy="ZodLazy",ar.ZodLiteral="ZodLiteral",ar.ZodEnum="ZodEnum",ar.ZodEffects="ZodEffects",ar.ZodNativeEnum="ZodNativeEnum",ar.ZodOptional="ZodOptional",ar.ZodNullable="ZodNullable",ar.ZodDefault="ZodDefault",ar.ZodCatch="ZodCatch",ar.ZodPromise="ZodPromise",ar.ZodBranded="ZodBranded",ar.ZodPipeline="ZodPipeline",ar.ZodReadonly="ZodReadonly";var sr=pt.create,ir=ft.create,or=Jt.create,dr=mt.create,ur=yt.create,cr=vt.create,lr=gt.create,pr=_t.create,hr=bt.create,fr=wt.create,mr=kt.create,yr=xt.create,vr=jt.create,gr=Ot.create,_r=Zt.create,br=Zt.strictCreate,wr=At.create,kr=St.create,xr=Nt.create,jr=Pt.create,Or=It.create,Tr=Rt.create,Zr=$t.create,Ar=Mt.create,Cr=Ft.create,Sr=zt.create,Er=Ut.create,Nr=Dt.create,Pr=Bt.create,Ir=Vt.create,Rr=Kt.create,$r=Wt.create,Mr=Vt.createWithPreprocess,Fr=Xt.create,zr={string:e=>pt.create({...e,coerce:!0}),number:e=>ft.create({...e,coerce:!0}),boolean:e=>yt.create({...e,coerce:!0}),bigint:e=>mt.create({...e,coerce:!0}),date:e=>vt.create({...e,coerce:!0})},Lr=Se,Ur=Object.freeze({__proto__:null,defaultErrorMap:be,setErrorMap:function(e){we=e},getErrorMap:ke,makeIssue:xe,EMPTY_PATH:[],addIssueToContext:je,ParseStatus:Ce,INVALID:Se,DIRTY:Ee,OK:Ne,isAborted:Pe,isDirty:Ie,isValid:Re,isAsync:$e,get util(){return le},get objectUtil(){return he},ZodParsedType:ye,getParsedType:ve,ZodType:Be,datetimeRegex:dt,ZodString:pt,ZodNumber:ft,ZodBigInt:mt,ZodBoolean:yt,ZodDate:vt,ZodSymbol:gt,ZodUndefined:_t,ZodNull:bt,ZodAny:wt,ZodUnknown:kt,ZodNever:xt,ZodVoid:jt,ZodArray:Ot,ZodObject:Zt,ZodUnion:At,ZodDiscriminatedUnion:St,ZodIntersection:Nt,ZodTuple:Pt,ZodRecord:It,ZodMap:Rt,ZodSet:$t,ZodFunction:Mt,ZodLazy:Ft,ZodLiteral:zt,ZodEnum:Ut,ZodNativeEnum:Dt,ZodPromise:Bt,ZodEffects:Vt,ZodTransformer:Vt,ZodOptional:Kt,ZodNullable:Wt,ZodDefault:qt,ZodCatch:Gt,ZodNaN:Jt,BRAND:Yt,ZodBranded:Ht,ZodPipeline:Xt,ZodReadonly:Qt,custom:tr,Schema:Be,ZodSchema:Be,late:nr,get ZodFirstPartyTypeKind(){return rr},coerce:zr,any:fr,array:gr,bigint:dr,boolean:ur,date:cr,discriminatedUnion:kr,effect:Ir,enum:Er,function:Ar,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>tr(t=>t instanceof e,t),intersection:xr,lazy:Cr,literal:Sr,map:Tr,nan:or,nativeEnum:Nr,never:yr,null:hr,nullable:$r,number:ir,object:_r,oboolean:()=>ur().optional(),onumber:()=>ir().optional(),optional:Rr,ostring:()=>sr().optional(),pipeline:Fr,preprocess:Mr,promise:Pr,record:Or,set:Zr,strictObject:br,string:sr,symbol:lr,transformer:Ir,tuple:jr,undefined:pr,union:wr,unknown:mr,void:vr,NEVER:Lr,ZodIssueCode:ge,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:_e}),Dr=Ur.object({publicPath:Ur.string().optional().describe("The public path to the wasm files and the onnx model.").default("https://staticimgly.com/@imgly/background-removal-data/${PACKAGE_VERSION}/dist/").transform(e=>e.replace("${PACKAGE_NAME}","@imgly/background-removal").replace("${PACKAGE_VERSION}","1.7.0")),debug:Ur.boolean().default(!1).describe("Whether to enable debug logging."),rescale:Ur.boolean().default(!0).describe("Whether to rescale the image."),device:Ur.enum(["cpu","gpu"]).default("cpu").describe("The device to run the model on."),proxyToWorker:Ur.boolean().default(!1).describe("Whether to proxy inference to a web worker."),fetchArgs:Ur.any().default({}).describe("Arguments to pass to fetch when loading the model."),progress:Ur.function().args(Ur.string(),Ur.number(),Ur.number()).returns(Ur.void()).describe("Progress callback.").optional(),model:Ur.preprocess(e=>{switch(e){case"large":return"isnet";case"small":return"isnet_quint8";case"medium":return"isnet_fp16";default:return e}},Ur.enum(["isnet","isnet_fp16","isnet_quint8"])).default("medium"),output:Ur.object({format:Ur.enum(["image/png","image/jpeg","image/webp","image/x-rgba8","image/x-alpha8"]).default("image/png"),quality:Ur.number().default(.8)}).default({})}).default({}).transform(e=>(e.debug&&console.log("Config:",e),e.debug&&!e.progress&&(e.progress=e.progress??((e,t,r)=>{console.debug(`Downloading ${e}: ${t} of ${r}`)}),crossOriginIsolated||e.debug&&console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),e));var Br=p(m());var Vr=ee(async function(e){var t;t=e,e=Dr.parse(t??{});const r=await async function(e){e.debug&&console.debug("Loading model...",e.model);const t=e.model,r=await ce(`/models/${t}`,e),a=await r.arrayBuffer();return await async function(e,t){const r="gpu"===t.device&&await de(),a=r&&t.proxyToWorker,n=[r?"webgpu":"wasm"],s=await me(r);t.debug&&(console.debug("\tUsing WebGPU:",r),console.debug("\tProxy to Worker:",a),s.env.debug=!0,s.env.logLevel="verbose"),s.env.wasm.numThreads=navigator.hardwareConcurrency??4,s.env.wasm.proxy=a;const i=r?"/onnxruntime-web/ort-wasm-simd-threaded.jsep":"/onnxruntime-web/ort-wasm-simd-threaded",o=await ue(`${i}.wasm`,t),d=await ue(`${i}.mjs`,t);s.env.wasm.wasmPaths={mjs:d,wasm:o},t.debug&&console.debug("ort.env.wasm:",s.env.wasm);const u={executionProviders:n,graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0};return await s.InferenceSession.create(e,u).catch(e=>{throw new Error(`Failed to create session: "${e}". Please check if the publicPath is set correctly.`)})}(a,e)}(e);return{config:e,session:{base:r}}},e=>JSON.stringify(e));window.imglyRemoveBackground=async function(e,t){const{config:r,session:a}=await Vr(t);r.progress&&r.progress("compute:decode",0,4);const n=await se(e,r);r.progress?.("compute:inference",1,4);const[s,i]=await async function(e,t,r){const a=1024,[n,s,i]=e.shape,o=!1;let d=ne(e,a,a,o);const u=function(e,t=[128,128,128],r=[256,256,256]){var a=e.data;const[n,s,i]=e.shape,o=n*s,d=new Float32Array(3*o);for(let e=0,n=0;e<a.length;e+=4,n+=1)d[n]=(a[e]-t[0])/r[0],d[n+o]=(a[e+1]-t[1])/r[1],d[n+o+o]=(a[e+2]-t[2])/r[2];return(0,te.default)(d,[1,3,n,s])}(d);let c=await async function(e,t,r,a){const n="gpu"===a.device&&await de(),s=await me(n),i={};for(const[e,r]of t)i[e]=new s.Tensor("float32",new Float32Array(r.data),r.shape);const o=await e.run(i,{}),d=[];for(const e of["output"]){const t=o[e],r=t.dims,a=t.data,n=(0,oe.default)(a,r);d.push(n)}return d}(r.base,[["input",u]],0,t),l=function(e){const t=new Uint8Array(e.data.length);for(let r=0;r<e.data.length;r++)t[r]=255*e.data[r];return(0,te.default)(t,e.shape)}((0,Br.default)(c[0].data,[a,a,1]));return t.rescale?(l=ne(l,s,n,o),[l,e]):[l,d]}(n,r,a);r.progress?.("compute:mask",2,4);const o=i,[d,u]=o.shape,c=d*u;for(let e=0;e<c;e+=1)o.data[4*e+3]=s.data[e];r.progress?.("compute:encode",3,4);const l=await async function(e,t=.8,r="image/png"){const[a,n,s]=e.shape;switch(r){case"image/x-alpha8":case"image/x-rgba8":{const t=re.create(r,{width:n.toString(),height:a.toString()});return new Blob([e.data],{type:t.toString()})}case"image/png":case"image/jpeg":case"image/webp":{const s=new ImageData(new Uint8ClampedArray(e.data),n,a);var i=ie(s.width,s.height);return i.getContext("2d").putImageData(s,0,0),i.convertToBlob({quality:t,type:r})}default:throw new Error(`Invalid format: ${r}`)}}(o,r.output.quality,r.output.format);return r.progress?.("compute:encode",4,4),l},window.imglyPreloadBackground=async function(e){await Vr(e)},console.log("[BackgroundRemover] @imgly/background-removal loaded successfully")})();